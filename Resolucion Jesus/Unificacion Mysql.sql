/*
CREATE DATABASE MACDONALS;
CREATE USER 'dummy'@'%' IDENTIFIED BY 'dummy';
GRANT ALL ON B2EJ3.* TO 'dummy'@'%';
*/

CREATE TABLE RESTAURANTE
(
	NOMBRE VARCHAR(30),
	CONSTRAINT PK_RESTAURANTE PRIMARY KEY (NOMBRE)
);
CREATE TABLE CLIENTES
(
	NOMBRE VARCHAR(30),
	CORREO VARCHAR(50),
	TELEFONO NUMERIC(10),
	DIRECCION VARCHAR(30),
	NOMBRE_RESTAURANTE VARCHAR(30),
	CONSTRAINT PK_CLIENTES PRIMARY KEY (NOMBRE),
	CONSTRAINT FK1_CLIENTES FOREIGN KEY (NOMBRE_RESTAURANTE) REFERENCES RESTAURANTE(NOMBRE)

);
CREATE TABLE RESERVAS
(
	CODIGO NUMERIC(10),
	NUMERO_PERSONA NUMERIC(10),
	ZONA VARCHAR(30),
	FECHA DATE,
	HORA DATE,
	NOMBRE VARCHAR(30),
	CONSTRAINT PK_RESERVAS PRIMARY KEY (CODIGO),
	CONSTRAINT FK1_RESERVAS FOREIGN KEY (NOMBRE) REFERENCES CLIENTES(NOMBRE)
);
CREATE TABLE EMPLEADOS
(
	DNI VARCHAR(10),
	ROL VARCHAR(10),
	NOMBRE VARCHAR(30),
	SUELDO NUMERIC(10),
	EMAIL VARCHAR(20),
	DIRECCION VARCHAR(50),
	TELEFONO NUMERIC(10),
	CUENTA_BANCARIA VARCHAR(10),
	NOMBRE_RESTAURANTE VARCHAR(30),
	CONSTRAINT PK_EMPLEADOS PRIMARY KEY (DNI),
	CONSTRAINT FK1_EMPLEADOS FOREIGN KEY (NOMBRE_RESTAURANTE) REFERENCES RESTAURANTE(NOMBRE)
);
CREATE TABLE COCINEROS
(
	DNI VARCHAR(10),
	GRADO_COCINA VARCHAR(10),
	CONSTRAINT PK_COCINEROS PRIMARY KEY (DNI),
	CONSTRAINT FK1_COCINEROS FOREIGN KEY (DNI) REFERENCES EMPLEADOS(DNI)
);
CREATE TABLE CAMAREROS
(
	DNI VARCHAR(10),
	ANIOS_TRABAJADOS NUMERIC(10),
	CONSTRAINT PK_CAMAREROS PRIMARY KEY (DNI),
	CONSTRAINT FK1_CAMAREROS FOREIGN KEY (DNI) REFERENCES EMPLEADOS(DNI)
);
CREATE TABLE MESAS
(
	NUMERO NUMERIC(10),
	CODIGO NUMERIC(10),
	DNI VARCHAR(10),
	CONSTRAINT PK_MESAS PRIMARY KEY (NUMERO),
	CONSTRAINT FK1_MESAS FOREIGN KEY (CODIGO) REFERENCES RESERVAS(CODIGO),
	CONSTRAINT FK2_MESAS FOREIGN KEY (DNI) REFERENCES CAMAREROS(DNI)
);
CREATE TABLE RECETAS
(
	CODIGO NUMERIC(10),
	ALERGENOS VARCHAR(10),
	TIPO VARCHAR(10),
	CONSTRAINT PK_RECETAS PRIMARY KEY (CODIGO)
);
CREATE TABLE COCINAN
(
	DNI VARCHAR(10),
	CODIGO NUMERIC(10),
	CONSTRAINT PK_COCINAN PRIMARY KEY (DNI, CODIGO),
	CONSTRAINT FK1_COCINAN FOREIGN KEY (DNI) REFERENCES COCINEROS(DNI),
	CONSTRAINT FK2_COCINAN FOREIGN KEY (CODIGO) REFERENCES RECETAS(CODIGO)
);
CREATE TABLE PRODUCTOS
(
	ID NUMERIC(10),
	NOMBRE VARCHAR(30),
	PRECIO NUMERIC(10,2),
	STOCK NUMERIC(10),
	CONSTRAINT PK_PRODUCTOS PRIMARY KEY (ID)
);
CREATE TABLE CONSUMEN
(
	CODIGO_RECETAS NUMERIC(10),
	ID NUMERIC(10),
	CONSTRAINT PK_CONSUMEN PRIMARY KEY (CODIGO_RECETAS, ID),
	CONSTRAINT FK1_CONSUMEN FOREIGN KEY (CODIGO_RECETAS) REFERENCES RECETAS(CODIGO),
	CONSTRAINT FK2_CONSUMEN FOREIGN KEY (ID) REFERENCES PRODUCTOS(ID)
);
CREATE TABLE PROVEEDORES
(
	CIF NUMERIC (10),
	NOMBRE VARCHAR(30),
	DESCUENTO NUMERIC(10,2),
	FIABILIDAD VARCHAR(10),
	CUENTA_BANCARIA VARCHAR(10),
	CONSTRAINT PK_PROVEEDORES PRIMARY KEY (CIF)
);
CREATE TABLE SON_COMPRADOS
(
	ID NUMERIC(10),
	CIF NUMERIC(10),
	CONSTRAINT PK_SON_COMPRADOS PRIMARY KEY (ID, CIF),
	CONSTRAINT FK1_SON_COMPRADOS FOREIGN KEY (ID) REFERENCES PRODUCTOS(ID),
	CONSTRAINT FK2_SON_COMPRADOS FOREIGN KEY (CIF) REFERENCES PROVEEDORES(CIF)
);

-- RESTAURANTES
INSERT INTO RESTAURANTE VALUES ('MC DONALD Sevilla');
INSERT INTO RESTAURANTE VALUES ('MC DONALD Madrid');
INSERT INTO RESTAURANTE VALUES ('MC DONALD Carmona');

-- CLIENTES
INSERT INTO CLIENTES VALUES ('Alberto Sánchez', 'alberto@gmail.com', 611111111, 'C/ Real 12', 'MC DONALD Sevilla');
INSERT INTO CLIENTES VALUES ('Natalia Romero', 'natalia@gmail.com', 622222222, 'Av. Europa 45', 'MC DONALD Madrid');
INSERT INTO CLIENTES VALUES ('Sergio Molina', 'sergio@hotmail.com', 633333333, 'Plaza Mayor 3', 'MC DONALD Carmona');

-- RESERVAS
INSERT INTO RESERVAS VALUES (10, 4, 'Salón', DATE '2026-02-15', DATE '2026-02-15', 'Alberto Sánchez');
INSERT INTO RESERVAS VALUES (11, 6, 'Terraza', DATE '2026-02-18', DATE '2026-02-18', 'Natalia Romero');
INSERT INTO RESERVAS VALUES (12, 2, 'Privado', DATE '2026-02-20', DATE '2026-02-20', 'Sergio Molina');

-- EMPLEADOS
INSERT INTO EMPLEADOS VALUES ('77889900G', 'Cocinero', 'Raúl Gómez', 1900, 'raul@empresa.com', 'C/ Fuego 9', 644444444, 'ES77889900', 'MC DONALD Sevilla');
INSERT INTO EMPLEADOS VALUES ('88990011H', 'Camarero', 'Elena Torres', 1600, 'elena@empresa.com', 'C/ Agua 18', 655555555, 'ES88990011', 'MC DONALD Madrid');
INSERT INTO EMPLEADOS VALUES ('99001122J', 'Cocinero', 'Iván Cruz', 2050, 'ivan@empresa.com', 'Av. Mar 27', 666666666, 'ES99001122', 'MC DONALD Carmona');

-- COCINEROS
INSERT INTO COCINEROS VALUES ('77889900G', 'Alta');
INSERT INTO COCINEROS VALUES ('99001122J', 'Alta');

-- CAMAREROS
INSERT INTO CAMAREROS VALUES ('88990011H', 4);

-- MESAS
INSERT INTO MESAS VALUES (30, 1, '88990011H');
INSERT INTO MESAS VALUES (31, 2, '88990011H');
INSERT INTO MESAS VALUES (32, 3, '88990011H');

-- RECETAS
INSERT INTO RECETAS VALUES (300, 'Lactosa', 'Hamburguesa');
INSERT INTO RECETAS VALUES (301, 'Gluten', 'Pan');
INSERT INTO RECETAS VALUES (302, 'Marisco', 'Ensalada');

-- COCINAN
INSERT INTO COCINAN VALUES ('77889900G', 300);
INSERT INTO COCINAN VALUES ('77889900G', 301);
INSERT INTO COCINAN VALUES ('99001122J', 302);

-- PRODUCTOS
INSERT INTO PRODUCTOS VALUES (700, 'Pan', 0.90, 120);
INSERT INTO PRODUCTOS VALUES (701, 'Carne', 5.50, 50);
INSERT INTO PRODUCTOS VALUES (702, 'Lechuga', 0.70, 100);
INSERT INTO PRODUCTOS VALUES (703, 'Gambas', 12.00, 20);

-- CONSUMEN
INSERT INTO CONSUMEN VALUES (300, 701);
INSERT INTO CONSUMEN VALUES (300, 700);
INSERT INTO CONSUMEN VALUES (302, 703);
INSERT INTO CONSUMEN VALUES (302, 702);

-- PROVEEDORES
INSERT INTO PROVEEDORES VALUES (9001, 'Carnes del Sur', 5.00, 'Alta', 'ES90010001');
INSERT INTO PROVEEDORES VALUES (9002, 'Huerta Fresca', 2.50, 'Media', 'ES90020002');
INSERT INTO PROVEEDORES VALUES (9003, 'Mariscos Costa', 7.00, 'Alta', 'ES90030003');

-- SON_COMPRADOS
INSERT INTO SON_COMPRADOS VALUES (700, 9002);
INSERT INTO SON_COMPRADOS VALUES (701, 9001);
INSERT INTO SON_COMPRADOS VALUES (702, 9002);
INSERT INTO SON_COMPRADOS VALUES (703, 9003);


SELECT * FROM RESTAURANTE;
SELECT * FROM CLIENTES;
SELECT * FROM RESERVAS;
SELECT * FROM EMPLEADOS;
SELECT * FROM COCINEROS;
SELECT * FROM CAMAREROS;
SELECT * FROM MESAS;
SELECT * FROM RECETAS;
SELECT * FROM COCINAN;
SELECT * FROM PRODUCTOS;
SELECT * FROM CONSUMEN;
SELECT * FROM PROVEEDORES;
SELECT * FROM SON_COMPRADOS;